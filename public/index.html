<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIKAH - Encontros Autênticos</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Conecte-se com pessoas incríveis de forma autêntica">
    <meta name="theme-color" content="#ff6b6b">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="FIKAH">
    <link rel="manifest" href="manifest.json">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iNCIgZmlsbD0iI2ZmNmI2YiIvPgo8c3ZnIHg9IjgiIHk9IjgiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiPgo8cGF0aCBkPSJNMjAuODQgNC42MWE1LjUgNS41IDAgMCAwLTcuNzggMEwxMiA1LjY3bC0xLjA2LTEuMDZhNS41IDUuNSAwIDAgMC03Ljc4IDcuNzhsMS4wNiAxLjA2TDEyIDIxLjIzbDcuNzgtNy43OCAxLjA2LTEuMDZhNS41IDUuNSAwIDAgMCAwLTcuNzh6Ci8+Cjwvc3ZnPgo8L3N2Zz4K">
    
    <link rel="stylesheet" href="app.css">
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-content">
                <div class="logo-loading">
                    <h1>FIKAH</h1>
                    <p>Conecte-se com pessoas incríveis</p>
                </div>
                <div class="loading-spinner"></div>
            </div>
        </div>

        <!-- Main App Container -->
        <div id="main-app" class="main-app hidden">
            <!-- Header -->
            <header class="app-header">
                <div class="header-content">
                    <div class="logo-section">
                        <h1 class="logo">FIKAH</h1>
                        <span class="logo-subtitle">Encontros Autênticos</span>
                    </div>
                    <div class="header-center">
                        <div class="proximity-filter">
                            <button class="filter-toggle active" data-filter="all">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polygon points="16.24,7.76 14.12,14.12 7.76,16.24 9.88,9.88 16.24,7.76"></polygon>
                                </svg>
                                <span>Todos</span>
                            </button>
                            <button class="filter-toggle" data-filter="nearby">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                    <circle cx="12" cy="10" r="3"></circle>
                                </svg>
                                <span>Próximos</span>
                            </button>
                        </div>
                        <div class="proximity-dropdown" id="proximity-dropdown">
                            <button class="proximity-dropdown-btn" id="proximity-dropdown-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polygon points="16.24,7.76 14.12,14.12 7.76,16.24 9.88,9.88 16.24,7.76"></polygon>
                                </svg>
                                <span>Todos</span>
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6,9 12,15 18,9"></polyline>
                                </svg>
                            </button>
                            <div class="proximity-dropdown-menu" id="proximity-dropdown-menu">
                                <button class="proximity-dropdown-item active" data-filter="all">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <polygon points="16.24,7.76 14.12,14.12 7.76,16.24 9.88,9.88 16.24,7.76"></polygon>
                                    </svg>
                                    <span>Todos</span>
                                </button>
                                <button class="proximity-dropdown-item" data-filter="5km">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                        <circle cx="12" cy="10" r="3"></circle>
                                    </svg>
                                    <span>5 km</span>
                                </button>
                                <button class="proximity-dropdown-item" data-filter="10km">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                        <circle cx="12" cy="10" r="3"></circle>
                                    </svg>
                                    <span>10 km</span>
                                </button>
                                <button class="proximity-dropdown-item" data-filter="25km">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                        <circle cx="12" cy="10" r="3"></circle>
                                    </svg>
                                    <span>25 km</span>
                                </button>
                                <button class="proximity-dropdown-item" data-filter="50km">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                        <circle cx="12" cy="10" r="3"></circle>
                                    </svg>
                                    <span>50 km</span>
                                </button>
                                <button class="proximity-dropdown-item" data-filter="nearby">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                        <circle cx="12" cy="10" r="3"></circle>
                                    </svg>
                                    <span>Próximos (5km)</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="header-actions">
                        <button class="header-btn" id="notifications-btn">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                            </svg>
                            <span class="notification-badge">3</span>
                        </button>
                        <button class="premium-btn" id="premium-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26 12,2"></polygon>
                            </svg>
                            <span>Premium</span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Usage Counters (for non-premium users) -->
        <div id="usage-counters" class="usage-counters" style="display: none;">
            <h4>Uso Diário</h4>
            <div class="likes-counter">0 curtidas restantes</div>
            <div class="super-likes-counter">0 super likes restantes</div>
            <div class="conversations-counter">0 conversas restantes</div>
        </div>

        <!-- Main Content -->
            <main class="app-main">
                <!-- Home Screen -->
                <div id="home-screen" class="screen active">
                    <!-- Stories Section -->
                    <section class="stories-section">
                        <div class="stories-container">
                            <div class="story-item add-story">
                                <div class="story-avatar">
                                    <img src="placeholder.svg" alt="Seu story">
                                    <div class="add-story-icon">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                            <line x1="12" y1="5" x2="12" y2="19"></line>
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                        </svg>
                                    </div>
                                </div>
                                <span class="story-name">Seu story</span>
                            </div>
                            <div class="story-item" data-story-id="1">
                                <div class="story-avatar">
                                    <img src="placeholder.svg" alt="Ana Silva">
                                </div>
                                <span class="story-name">Ana</span>
                            </div>
                            <div class="story-item viewed" data-story-id="2">
                                <div class="story-avatar">
                                    <img src="placeholder.svg" alt="Carlos Santos">
                                </div>
                                <span class="story-name">Carlos</span>
                            </div>
                            <div class="story-item" data-story-id="3">
                                <div class="story-avatar">
                                    <img src="placeholder.svg" alt="Maria">
                                </div>
                                <span class="story-name">Maria</span>
                            </div>
                        </div>
                    </section>

                    <!-- Posts Section -->
                    <section class="posts-section">
                        <div class="posts-container" id="posts-container">
                            <!-- Posts will be dynamically loaded here -->
                        </div>
                    </section>
                </div>

                <!-- Explore Screen -->
                <div id="explore-screen" class="screen">
                    <div class="explore-header">
                        <div class="search-container">
                            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            <input type="text" placeholder="Buscar pessoas próximas..." class="search-input" id="explore-search">
                        </div>
                        <button class="filter-menu-btn" id="filter-menu-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="22,3 2,3 10,12.46 10,19 14,21 14,12.46 22,3"></polygon>
                            </svg>
                        </button>
                    </div>
                    <div class="explore-filters" id="explore-filters">
                        <div class="filter-section">
                            <h4>Status</h4>
                            <div class="filter-options">
                                <button class="filter-btn active" data-filter="all">Todos</button>
                                <button class="filter-btn" data-filter="online">Online</button>
                                <button class="filter-btn" data-filter="nearby">Próximos</button>
                            </div>
                        </div>
                        <div class="filter-section">
                            <h4>Idade</h4>
                            <div class="filter-options">
                                <button class="filter-btn" data-filter="18-25">18-25</button>
                                <button class="filter-btn" data-filter="26-35">26-35</button>
                                <button class="filter-btn" data-filter="36+">36+</button>
                            </div>
                        </div>
                        <div class="filter-section">
                            <h4>Interesses</h4>
                            <div class="filter-options">
                                <button class="filter-btn" data-filter="travel">Viagens</button>
                                <button class="filter-btn" data-filter="sports">Esportes</button>
                                <button class="filter-btn" data-filter="music">Música</button>
                                <button class="filter-btn" data-filter="food">Gastronomia</button>
                            </div>
                        </div>
                        <div class="filter-actions">
                            <button class="clear-filters-btn">Limpar Filtros</button>
                            <button class="apply-filters-btn">Aplicar</button>
                        </div>
                    </div>
                    <div class="explore-grid" id="explore-grid">
                        <!-- Explore cards will be dynamically loaded here -->
                    </div>
                </div>

                <!-- Messages Screen -->
                <div id="messages-screen" class="screen">
                    <div class="messages-header">
                        <h2>Mensagens</h2>
                        <button class="header-btn">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="chats-container" id="chats-container">
                        <!-- Chat items will be dynamically loaded here -->
                    </div>
                </div>

                <!-- Chat Screen -->
                <div id="chat-screen" class="screen">
                    <div class="chat-header">
                        <button class="back-btn" id="back-to-messages">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="15,18 9,12 15,6"></polyline>
                            </svg>
                        </button>
                        <div class="chat-user-info">
                            <div class="chat-avatar">
                                <img src="" alt="" id="chat-user-avatar">
                                <div class="online-indicator"></div>
                            </div>
                            <div class="chat-user-details">
                                <h3 id="chat-user-name"></h3>
                                <span id="chat-user-status">Online</span>
                            </div>
                        </div>
                        <div class="chat-actions">
                            <button class="header-btn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                                </svg>
                            </button>
                            <button class="header-btn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="23 7 16 12 23 17 23 7"></polygon>
                                    <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="messages-container" id="messages-container">
                        <!-- Messages will be dynamically loaded here -->
                    </div>
                    <div class="message-input-container">
                        <div class="message-input-wrapper">
                            <input type="text" placeholder="Digite uma mensagem..." class="message-input" id="message-input">
                            <button class="send-btn" id="send-message">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                    <polygon points="22,2 15,22 11,13 2,9 22,2"></polygon>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Profile Screen -->
                <div id="profile-screen" class="screen">
                    <div class="profile-header">
                        <div class="profile-cover">
                            <img src="https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=800&h=400&fit=crop" alt="Cover">
                        </div>
                        <div class="profile-info">
                            <div class="profile-avatar-large">
                                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face" alt="Seu perfil">
                                <button class="edit-avatar-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
                                        <circle cx="12" cy="13" r="4"></circle>
                                    </svg>
                                </button>
                            </div>
                            <div class="profile-details">
                                <h2>Você</h2>
                                <p>25 anos • São Paulo, SP</p>
                                <p class="profile-bio">Apaixonado por aventuras e bons momentos! 🌟</p>
                            </div>
                        </div>
                    </div>
                    <div class="profile-content">
                        <div class="profile-stats">
                            <div class="stat-item">
                                <span class="stat-number">127</span>
                                <span class="stat-label">Matches</span>
                            </div>
                            <div class="stat-item clickable" id="who-liked-btn">
                                <span class="stat-number">89</span>
                                <span class="stat-label">Curtidas</span>
                                <div class="stat-premium-icon">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"></polygon>
                                    </svg>
                                </div>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">45</span>
                                <span class="stat-label">Conversas</span>
                            </div>
                        </div>
                        <div class="profile-premium-features">
                            <button class="premium-feature-btn" id="profile-visitors-btn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                                <span>Ver visitantes do perfil</span>
                                <div class="premium-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"></polygon>
                                    </svg>
                                </div>
                            </button>
                        </div>
                        <div class="profile-actions">
                            <button class="profile-btn primary">Editar Perfil</button>
                            <button class="profile-btn secondary">Configurações</button>
                        </div>
                        
                        <!-- Seção de Preferências -->
                        <div class="profile-preferences">
                            <h3>Minhas Preferências</h3>
                            
                            <div class="preference-section">
                                <h4>Preferências de Gênero</h4>
                                <div class="preference-tags" id="gender-preferences">
                                    <!-- Será preenchido dinamicamente -->
                                </div>
                            </div>
                            
                            <div class="preference-section">
                                <h4>Tipo de Relação</h4>
                                <div class="preference-tags" id="relationship-types">
                                    <!-- Será preenchido dinamicamente -->
                                </div>
                            </div>
                            
                            <div class="preference-section">
                                <h4>Interesses</h4>
                                <div class="preference-tags" id="user-interests">
                                    <!-- Será preenchido dinamicamente -->
                                </div>
                            </div>
                            
                            <div class="preference-section">
                                <h4>O que busco hoje</h4>
                                <div class="preference-tags" id="looking-for">
                                    <!-- Será preenchido dinamicamente -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="profile-settings">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="5"></circle>
                                        <line x1="12" y1="1" x2="12" y2="3"></line>
                                        <line x1="12" y1="21" x2="12" y2="23"></line>
                                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                        <line x1="1" y1="12" x2="3" y2="12"></line>
                                        <line x1="21" y1="12" x2="23" y2="12"></line>
                                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                                    </svg>
                                    <span>Modo Escuro</span>
                                </div>
                                <label class="theme-switch">
                                    <input type="checkbox" id="dark-mode-toggle">
                                    <span class="theme-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Story Viewer -->
                <div id="story-viewer" class="story-viewer hidden">
                    <div class="story-progress">
                        <div class="progress-bar"></div>
                    </div>
                    <div class="story-header">
                        <button class="story-close" id="close-story">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>
                        <div class="story-user-info">
                            <div class="story-user-avatar">
                                <img src="" alt="" id="story-user-avatar">
                            </div>
                            <div class="story-user-details">
                                <h3 id="story-user-name"></h3>
                                <span id="story-time">2h</span>
                            </div>
                        </div>
                    </div>
                    <div class="story-content">
                        <img src="" alt="" id="story-image">
                    </div>
                    <div class="story-actions">
                        <div class="story-input-container">
                            <input type="text" placeholder="Responder..." class="story-input">
                            <button class="story-action-btn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Bottom Navigation -->
            <nav class="bottom-nav">
                <button class="nav-btn active" data-screen="home">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9,22 9,12 15,12 15,22"></polyline>
                    </svg>
                    <span>Início</span>
                </button>
                <button class="nav-btn" data-screen="explore">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <span>Explorar</span>
                </button>
                <button class="create-post-btn" id="create-post-btn">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                </button>
                <button class="nav-btn" data-screen="messages">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                    <span>Mensagens</span>
                    <div class="message-badge">2</div>
                </button>
                <button class="nav-btn" data-screen="profile">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span>Perfil</span>
                </button>
            </nav>
        </div>

        <!-- Notifications -->
        <div id="notifications-container" class="notifications-container"></div>
        
        <!-- Premium Modal -->
        <div id="premium-modal" class="premium-modal">
            <div class="premium-modal-content">
                <div class="premium-modal-icon">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"></polygon>
                    </svg>
                </div>
                <h3 id="premium-modal-title">Funcionalidade Premium</h3>
                <p id="premium-modal-message">Esta funcionalidade está disponível apenas para usuários premium.</p>
                <div class="premium-modal-actions">
                    <button class="premium-upgrade-btn" id="premium-upgrade-btn">Fazer Upgrade</button>
                    <button class="premium-cancel-btn" id="premium-cancel-btn">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
    <script src="supabase-config.js"></script>
    <script src="supabase-client.js"></script>
    
    <!-- Authentication Check -->
    <script>
        // Verificar autenticação antes de carregar o app
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('🔐 Verificando autenticação...');
            
            try {
                // Aguardar inicialização do Supabase
                let attempts = 0;
                const maxAttempts = 50; // 5 segundos máximo
                
                while (!window.fikahSupabase && attempts < maxAttempts) {
                    await new Promise(resolve => setTimeout(resolve, 100));
                    attempts++;
                }
                
                if (!window.fikahSupabase) {
                    console.error('❌ Supabase não foi inicializado, redirecionando para login');
                    window.location.href = 'login.html';
                    return;
                }
                
                const currentUser = await window.fikahSupabase.getCurrentUser();
                
                if (!currentUser || !currentUser.user) {
                    console.log('❌ Usuário não autenticado, redirecionando para login');
                    window.location.href = 'login.html';
                    return;
                }
                
                console.log('✅ Usuário autenticado:', currentUser.user.email);
                
                // Carregar scripts do app apenas se autenticado
                const scripts = [
                    'https://js.stripe.com/v3/',
                    'stripe-config.js',
                    'free-user-limits.js',
                    'premium-manager.js',
                    'fikah-api.js',
                    'app.js'
                ];
                
                let scriptsLoaded = 0;
                const totalScripts = scripts.length;
                
                for (const src of scripts) {
                    try {
                        const script = document.createElement('script');
                        script.src = src;
                        document.body.appendChild(script);
                        
                        // Aguardar carregamento do script com timeout
                        await new Promise((resolve, reject) => {
                            const timeout = setTimeout(() => {
                                reject(new Error(`Timeout ao carregar ${src}`));
                            }, 5000);
                            
                            script.onload = () => {
                                clearTimeout(timeout);
                                scriptsLoaded++;
                                console.log(`✅ Script carregado (${scriptsLoaded}/${totalScripts}): ${src}`);
                                resolve();
                            };
                            
                            script.onerror = () => {
                                clearTimeout(timeout);
                                console.warn(`⚠️ Erro ao carregar script: ${src}`);
                                resolve(); // Continuar mesmo com erro
                            };
                        });
                    } catch (error) {
                        console.warn(`⚠️ Erro ao carregar script ${src}:`, error);
                    }
                }
                
                console.log(`✅ ${scriptsLoaded}/${totalScripts} scripts carregados`);
                
                // Timeout de segurança apenas para garantir que o app.js execute
                // Se o app.js não remover a tela de loading em 10 segundos, algo deu errado
                setTimeout(() => {
                    const loadingScreen = document.getElementById('loading-screen');
                    if (loadingScreen && loadingScreen.style.display !== 'none') {
                        console.error('❌ App.js não removeu a tela de loading, redirecionando para login');
                        window.location.href = 'login.html';
                    }
                }, 10000);
                
            } catch (error) {
                console.error('❌ Erro ao verificar autenticação:', error);
                // Em caso de erro, redirecionar para login
                window.location.href = 'login.html';
            }
        });
    </script>
</body>
</html>